#---------------------------------------------------------------------------------#
# Bla bli bla bla 
#---------------------------------------------------------------------------------#
VPATH := ../src
CFLAGS += -I . -I $(VPATH) 
OBJ := $(subst .c,.o,$(wildcard $(VPATH)/*.c))

#---------------------------------------------------------------------------------#
# Pattern rules
#---------------------------------------------------------------------------------#
%.c: %.l
	$(LEX) -t $< > $@

%.c: %.y
	$(YACC) -d $< -o $@ 

#---------------------------------------------------------------------------------#
# Build targets
#---------------------------------------------------------------------------------#
parser: $(OBJ) parser.o lexer.o
	$(CC) $^ -o $@ 

parser.c: parser.y

lexer.c: lexer.l parser.c

#---------------------------------------------------------------------------------#
# Misc
#---------------------------------------------------------------------------------#
.PHONY: clean
clean: 
	$(RM) *.c *.h *.o parser lexer 

